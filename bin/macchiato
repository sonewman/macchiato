#!/usr/bin/env node

var path = require('path')
var fs = require('fs')
var macchiato = require('macchiato')
var args = process.argv.slice(2)
var l = args.length
if (!l) return

args = require('minimist')(args)
var files = []

args._.forEach(function getFiles(p) {
  p = path.resolve(p)
  var stats = fs.statSync(p)
  if (stats.isFile()) {
    files.push(p)
  } else if (stats.isDirectory()) {
    fs.readdirSync(p).forEach(function (f) {
      getFiles(path.join(p, f))
    })
  }
})

macchiato.run(files, args)

// vim: set ft=javascript
